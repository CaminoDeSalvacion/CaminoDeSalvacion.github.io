<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Camino De Salvación</title>
<style>
  body { margin:0; font-family: Arial,sans-serif; background:#f4f4f9; color:#333; text-align:center;}
  header { background: linear-gradient(135deg,#2c3e50,#34495e); color:white; padding:20px; display:flex; align-items:center; justify-content:flex-start; flex-wrap:wrap;}
  .logo-container { background:white; border-radius:50%; width:190px; height:190px; display:flex; align-items:center; justify-content:center; margin-right:20px; flex-shrink:0;}
  .logo-container img { max-height:160px; width:auto;}
  .divider { width:3px; background:black; height:70%; margin-right:20px;}
  .header-text { text-align:left;}
  .header-text h1 { margin:0; font-size:2.5em;}
  .header-text p { margin:5px 0 0; font-size:1.2em;}
  main { padding:20px;}
  .video-container { position:relative; max-width:800px; margin:20px auto; background:white; padding:10px; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.1);}
  iframe { width:100%; height:450px; border:none; border-radius:10px;}
  .overlay { position:absolute; top:0; left:0; width:100%; height:100%; cursor:pointer; border-radius:10px; background:transparent;}
  footer { background:#2c3e50; color:white; padding:15px; margin-top:20px;}
  @media (max-width:768px){header{flex-direction:column;} .divider{display:none;} .header-text{text-align:center;margin-top:10px;} .logo-container{width:180px;height:180px;margin:0 0 10px 0;} .logo-container img{max-height:150px;} .header-text h1{font-size:2em;}}
</style>
</head>
<body>
<header>
  <div class="logo-container"><img src="logo.png" alt="Camino De Salvación Logo"></div>
  <div class="divider"></div>
  <div class="header-text">
    <h1>Camino De Salvación</h1>
    <p>Bienvenidos a nuestra transmisión en vivo</p>
  </div>
</header>

<main>
  <div class="video-container" id="video-box">
    <!-- YouTube Live Embed -->
    <iframe id="yt-live" src="https://www.youtube.com/embed/live_stream?channel=UCXQ5Kk-W4naw4YuUweLYW6g&autoplay=1&mute=1&enablejsapi=1" width="800" height="450" allow="accelerometer; autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share" allowfullscreen></iframe>
    <div class="overlay" id="play-overlay"></div>
  </div>
</main>

<footer>
  <p>© 2025 Camino De Salvación</p>
</footer>

<script>
  // Load YouTube IFrame API
  let tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  let firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  let player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('yt-live', {});
  }

  // Overlay click: unmute and try to play video
  document.getElementById("play-overlay").addEventListener("click", function() {
    const iframe = document.getElementById("yt-live");
    iframe.src = iframe.src.replace("&mute=1", "&mute=0"); // unmute
    this.style.display = "none"; // hide overlay

    // Attempt to play via YouTube API after short delay
    setTimeout(() => {
      if(player && player.playVideo) player.playVideo();
    }, 500);
  });

  // Auto fallback: scrape most recent Facebook post if YouTube fails
  document.getElementById("yt-live").addEventListener("error", function() {
    const videoBox = document.getElementById("video-box");
    const fbPageURL = "https://www.facebook.com/camino.de.salvacion.291890";

    fetch(fbPageURL)
      .then(res => res.text())
      .then(html => {
        const match = html.match(/\/posts\/(\d+)/);
        if(match && match[1]) {
          const postId = match[1];
          videoBox.innerHTML = `<iframe src="https://www.facebook.com/plugins/post.php?href=https%3A%2F%2Fwww.facebook.com%2Fcamino.de.salvacion.291890%2Fposts%2F${postId}&width=800" width="800" height="450" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowfullscreen allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"></iframe>`;
        } else {
          videoBox.innerHTML = "<p>No se pudo encontrar la última publicación de Facebook.</p>";
        }
      })
      .catch(() => {
        videoBox.innerHTML = "<p>Facebook fallback no disponible.</p>";
      });
  });
</script>
</body>
</html>
