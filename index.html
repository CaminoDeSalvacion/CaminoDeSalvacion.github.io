<script>
  async function loadLatestVideo() {
    try {
      const response = await fetch("https://youtube-live-proxy.iglesia-4e5.workers.dev");
      const data = await response.json();

      if (data.videoId) {
        document.getElementById("yt-live").innerHTML = `
          <iframe width="800" height="450"
            src="https://www.youtube.com/embed/${data.videoId}"
            frameborder="0"
            allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen>
          </iframe>
        `;
      } else {
        showFallback();
      }
    } catch (err) {
      showFallback();
    }
  }

  function showFallback() {
    document.getElementById("yt-live").innerHTML = `
      <iframe 
        src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Fcamino.de.salvacion.291890&tabs=timeline&width=800&height=450"
        width="800" height="450" style="border:none;overflow:hidden" scrolling="no" frameborder="0"
        allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"
        allowfullscreen>
      </iframe>
    `;
  }

  loadLatestVideo();
</script>
