<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camino De Salvación</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <header>
      <div class="logo-container"><img src="logo.png" alt="Camino De Salvación Logo"></div>
      <div class="divider"></div>
      <div class="header-text">
      <h1>Camino De Salvación</h1>
      <p>Bienvenidos a nuestra transmisión en vivo</p>
      </div>
    </header>

    <main>
      <div class="video-container" id="video-box">
        <div id="yt-live"></div>
      </div>
    </main>

    <footer>
     <p>© 2025 Camino De Salvación</p>
    </footer>

    <script>
      const workerURL = 'https://youtube-live-proxy.iglesia-4e5.workers.dev'; // your Cloudflare Worker

      fetch(workerURL)
        .then(res => res.json())
        .then(data => {
          if (data.videoId) {
            loadYouTubeVideo(data.videoId);
          } else {
            showFacebookFallback();
          }
        })
        .catch(() => showFacebookFallback());

      function loadYouTubeVideo(videoId) {
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        document.body.appendChild(tag);

        window.onYouTubeIframeAPIReady = function() {
          new YT.Player('yt-live', {
            height: '450',
            width: '800',
            videoId: videoId,
            playerVars: {
              autoplay: 0,
              mute: 0,
              playsinline: 1,
              modestbranding: 1,
              controls: 1,
              rel: 0
            },
            events: {
              'onError': onPlayerError
            }
          });
        };
      }

      function onPlayerError(event) {
        showFacebookFallback();
      }

      function showFacebookFallback() {
        const videoBox = document.getElementById("video-box");
        videoBox.innerHTML = `
        <iframe 
          src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Fcamino.de.salvacion.291890&tabs=timeline&width=800&height=450&small_header=false&adapt_container_width=true&hide_cover=false&show_facepile=false"
          width="800" height="450" style="border:none;overflow:hidden" scrolling="no" frameborder="0"
          allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"
          allowfullscreen>
        </iframe>`;
      }
    </script>
  </body>
</html>
